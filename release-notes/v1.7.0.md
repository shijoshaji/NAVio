# Release Notes - v1.7.0 ğŸš€
**"The Granular Privacy & Filters Update"**

**Release Date**: December 27, 2025
**Focus**: Deep Privacy Controls, Redemption Insights, and Historical Performance data.

---

## âœ¨ New Features

### ğŸ›¡ï¸ Granular Privacy Mode (Enhanced!)
We've taken Privacy Mode to the next level. Now, *everything* sensitive is covered details.
-   **Holdings**: Blurs Scheme Names, SIP Badges, and Return % cells. Group headers now hide aggregate returns and account names.
-   **Dashboard**: Asset Allocation charts now **blur legeneds** (names & percentages) completely.
-   **Settings**: Managed Account list now blurs Account Names and Initials.
-   **Trackers**: "Recent History" in SIP and Lumpsum trackers now hides Account Names.
-   **Consistent Visibility**: Layout structures (labels like "Units:", "Avg NAV:") remain visible to keep UI stability, while the values are securely blurred.

### ğŸ§¹ Redeem Filters & Insights
-   **Redemption Window (Active Tab)**: New filter to spot funds nearing exit. See funds classified by tenure:
    -   **N**: Short Term (< 1 Year)
    -   **Year 1, Year 2+**: Long Term holdings.
-   **Redeem Year Filter (Sold Tab)**: Analyzing past exits is easier. Filter your "Exited/Sold" history by the specific Year of Redemption.

### ğŸ“ˆ "Since Invested" High/Low
-   **New Metrics**: A dedicated table column in Active Holdings displaying the **Min/Max NAV** specifically from the *first investment date* onwards.
-   **Context**: Helps comparing current performance against the specific timeframe you have been invested, distinct from generic 52-week highs.

---

## ğŸ”§ Technical Changes

### Backend
-   **nav.py**: 
    -   **Stability Fix**: Added `db.rollback()` during NAV sync to prevent `IntegrityError` from invalidating the entire database session. Syncs are now more robust.
    -   **MetaData Fix**: Resolved a `NameError` in scheme metadata fetching algorithm.
-   **portfolio.py**: Implemented `min_since_invested` / `max_since_invested` logic querying filtered NAV history.

### Frontend
-   **Holdings.jsx**: 
    -   Implemented `PrivacyGuard` deep integration in `Row` and `GroupHeader`.
    -   Refactored `Row` component to calculate redemption periods.
    -   Added state management for new filters (`filterYear`, `filterRedeem`).
-   **Dashboard.jsx**: Updated Recharts `<Legend>` formatters to support React Component blurring.
-   **PrivacyContext**: Extended coverage to Account names in `Settings.jsx` and `Trackers`.

---

> **Upgrade Instruction**: Safe update. Pull latest backend and frontend. No DB schema changes, but running a NAV Sync is recommended to ensure metadata is fresh.

## ğŸ“Š Summary
**v1.7.0** focuses on **discretion** and **decision-making**. With the new Redemption filters, making exit decisions is faster. The enhanced **"Since Invested"** metrics give you personalized context. And with our **Hardened Privacy Mode**, you can confidently share your screen knowing that identifying details like Account Names and explicit Scheme details are completely hidden.
